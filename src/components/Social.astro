---
import { getCollection } from "astro:content"
import ResourceLink from "./ResourceLink.astro"
import type { AstroInstance } from "astro"
import SectionLayout from "../layouts/SectionLayout.astro"

const socials = await getCollection("socials")
const icons = import.meta.glob("/src/components/icons/socials/*.astro", { eager: true }) as Record<string, AstroInstance>

const socialLinks = socials.map(social => ({
  name: social.data.name,
  url: social.data.url,
  icon: icons[social.data.iconPath],
  handle: social.data.handle
}))
---
<SectionLayout title="Contact">
  <p>I am always up for interesting conversations.</p>
  <div class="grid grid-cols-1 gap-4 sm:grid-cols-2">
    {
      socialLinks.map(link => (
        <ResourceLink 
          link={link.url} 
          class="group w-full items-center justify-between gap-3 border border-gray-800 bg-aside p-4 text-left hover:border-gray-600 hover:bg-[#151515]"
        >
          <div class="flex items-center gap-3">
            <div class="flex h-10 w-10 items-center justify-center text-white">
              <link.icon.default class="h-6 w-6" />
            </div>
            <div class="flex flex-col gap-[2px]">
              <span class="font-semibold leading-tight">{link.name}</span>
              <span class="text-sm leading-tight text-gray-400">{link.handle}</span>
            </div>
          </div>
          <span class="rounded-md border border-transparent p-1 text-gray-400 transition-colors group-hover:border-gray-700 group-hover:text-white">
            <svg viewBox="0 0 20 20" fill="none" class="h-4 w-4">
              <path d="M7.5 12.5 12.5 7.5M8 7.5h4.5V12" stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </span>
        </ResourceLink>
      ))
    }
  </div>
</SectionLayout>
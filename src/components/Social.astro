---
import { getCollection } from "astro:content"
import ResourceLink from "./ResourceLink.astro"
import type { AstroInstance } from "astro"
import SectionLayout from "../layouts/SectionLayout.astro"

const socials = await getCollection("socials")
const icons = import.meta.glob("/src/components/icons/socials/*.astro", { eager: true }) as Record<string, AstroInstance>

const socialLinks = socials.map(social => ({
  name: social.data.name,
  url: social.data.url,
  icon: icons[social.data.iconPath],
  handle: social.data.handle
}))
---
<SectionLayout title="Contact">
  <p>I am always up for interesting conversations.</p>
  <div class="inline-flex gap-x-4 justify-center md:justify-start">
    {
      socialLinks.map(link => (
        <ResourceLink 
          link={link.url} 
        >
          {link.icon ? <link.icon.default /> : link.name}
        </ResourceLink>
      ))
    }
  </div>
</SectionLayout>